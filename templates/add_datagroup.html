{% extends "base.html" %}

{% block content %}
<h2>Add Data Group</h2>
<form method="post" action="{{ url_for('add_datagroup') }}">
    <label for="name">Data Group Name:</label>
    <input type="text" id="name" name="name" required>
    <br><br>
    <label for="type">Data Group Type:</label>
    <select id="type" name="type" required>
        <option value="" disabled selected>Select a Type</option>
        <option value="string">String</option>
        <option value="integer">Integer</option>
        <option value="address">Address</option>
    </select>
    <br><br>
    <label for="records">Records:</label>
    <div id="records">
        <div class="record">
            <input type="text" name="records_name" placeholder="Name" required>
            <input type="text" name="records_data" placeholder="Data" required>
            <button type="button" onclick="removeRecord(this)">Delete</button>
        </div>
    </div>
    <button type="button" onclick="addRecord()">Add Record</button>
    <br><br>
    <button type="submit">Add Data Group</button>
</form>

<script>
function addRecord() {
    const recordDiv = document.createElement('div');
    recordDiv.className = 'record';
    recordDiv.innerHTML = `
        <input type="text" name="records_name" placeholder="Name" required>
        <input type="text" name="records_data" placeholder="Data" required>
        <button type="button" onclick="removeRecord(this)">Delete</button>
    `;
    document.getElementById('records').appendChild(recordDiv);
}

function removeRecord(button) {
    button.parentElement.remove();
}
</script>
{% endblock %}
