<!-- browse_datagroups.html -->
{% extends "base.html" %}

{% block content %}
    <h2>Data Groups on {{ device.name }} ({{ device.address }})</h2>
    <div style="text-align: right;">
        <a href="{{ url_for('export_all_datagroups_json', device_name=device.name) }}" class="button">Export All Data Groups to JSON</a>
        <a href="{{ url_for('export_all_datagroups_csv', device_name=device.name) }}" class="button">Export All Data Groups to CSV</a>
    </div>
    {% for datagroup in datagroups %}
    <div>
        <h3>/{{ datagroup.partition }}/{{ datagroup.name }}</h3>
        {{ datagroup.records|length }} records - Description: {{ datagroup.description }}
            <div class="datagroups-div">
            <a href="{{ url_for('export_datagroup_from_bigip_csv', device_name=device.name, datagroup_name=datagroup.name) }}" class="small-button">Export to CSV</a>
            <a href="{{ url_for('export_datagroup_from_bigip_json', device_name=device.name, datagroup_name=datagroup.name) }}" class="small-button">Export to JSON</a>
            <table class="datagroups-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Data</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in datagroup.records %}
                    <tr>
                        <td>{{ record.name }}</td>
                        <td>{{ record.data }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endfor %}

<style>
    .datagroups-div {
        padding: 10px 0px;
    }
    .button, .small-button {
        background-color: #4CAF50;
        color: white;
        padding: 10px 15px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        border: none;
        border-radius: 4px;
    }
    .small-button {
        padding: 10px 10px;
        font-size: 14px;
    }
    .datagroups-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
    }
    
    .datagroups-table th, .datagroups-table td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }
    
    .datagroups-table th {
        background-color: #f2f2f2;
    }
    
    .datagroups-table th, .datagroups-table td:nth-child(1) {
        text-align: left;
    }
</style>

{% endblock %}

